#:set xButtonMargin 0.05
#:set yButtonMargin 0.02
#:set buttonHeight 0.1
#:set buttonHeight2 0.18
#:set buttonHeight3 0.16
#:set xTextInputMargin 0.3
#:set yTextInputMargin 0.01
#:set textInputFontSize 32
#:set textInputWidth 0.3
#:set textInputHeight 0.08
#:set labelFontSize 32
<MyButton@Button>
    # font_size: app.font_size
    font_size: 32
    size_hint: (0.3, buttonHeight)   
<ReturnButton@Button>
    text: "return"
    font_size: 20
    size_hint: (0.1, 0.1)


<StartLayout>
    FloatLayout:
        size: root.width, root.height

        MyButton:
            pos_hint: {'x': xButtonMargin, 'y': 3*yButtonMargin +2*buttonHeight }
            text: "test"
            on_press: 
                root.manager.transition.direction = 'right'
                root.manager.current = 'testing_screen'
        MyButton:
            pos_hint: {'x': xButtonMargin, 'y': 2*yButtonMargin + buttonHeight }
            text: "nastavitve"
            on_press: 
                root.manager.transition.direction = 'right'
                root.manager.current = 'settings_screen'
        MyButton:
            pos_hint: {'x': xButtonMargin, 'y': yButtonMargin }
            text: "o programu"
            on_press: 
                root.manager.transition.direction = 'up'
                root.manager.current = 'about_screen'
        MyButton:
            size_hint: (0.5, 0.2)
            pos_hint: {'x': 1 - xButtonMargin - 0.5, 'center_y': 0.25 }
            text: "Začetek"
            on_press: 
                root.manager.transition.direction = 'left'
                root.manager.current = 'user_data_screen'
        MyButton:
            size_hint: (0.5, 0.1)
            pos_hint: {'x': 1 - xButtonMargin - 0.5, 'center_y': 0.08 }
            text: "Nadaljuj"
            on_press: 
                root.manager.transition.direction = 'left'
                root.manager.current = 'record_screen'
        Label:
            text:"VOICE RECORDER :>"
            # size_hint: (0.9, 0.5)
            # pos_hint: {'x': 0.1, 'y': 0.9 }
            background_color: (1,1,1,1)

<UserDataScreen>
    FloatLayout:
        size: root.width, root.height
        Label:
            text: "USER DATA BABY!"

            color: (0,0,0,1)
            bold: True
            pos_hint: {'center_x': 0.5, 'center_y': 0.8}
        
        Label:
            text: "Ime"

            font_size: 32
            color: (0,0,0,1)
            bold: True
            pos_hint: {'center_x': xTextInputMargin -0.1, 'center_y': 0.7+textInputHeight/2}
        TextInput:
            id:name_input
            text: ""
            multiline: False
            write_tab: False
            font_size: textInputFontSize
            size_hint: (textInputWidth, textInputHeight)
            pos_hint: {'x': xTextInputMargin, 'y': 0.7}

        Label:
            text: "Priimek"

            font_size: 32
            color: (0,0,0,1)
            bold: True
            pos_hint: {'center_x': xTextInputMargin -0.1, 'center_y': (0.7 - textInputHeight - yTextInputMargin) + textInputHeight/2}
        TextInput:
            id:surname_input
            text: ""
            multiline: False
            write_tab: False
            font_size: textInputFontSize
            size_hint: (textInputWidth, textInputHeight)
            pos_hint: {'x': xTextInputMargin, 'y': 0.7 - textInputHeight - yTextInputMargin}

        Label:
            text: "Koda"

            font_size: 32
            color: (0,0,0,1)
            bold: True
            pos_hint: {'center_x': xTextInputMargin -0.1, 'center_y': (0.7 - 2*textInputHeight - 2*yTextInputMargin) + textInputHeight/2}
        TextInput:
            id:code_input
            text: ""
            multiline: False
            write_tab: False
            font_size: textInputFontSize
            size_hint: (textInputWidth, textInputHeight)
            pos_hint: {'x': xTextInputMargin, 'y': 0.7 - 2*textInputHeight - 2*yTextInputMargin}

        Label:
            text: "Regija"

            font_size: 32
            color: (0,0,0,1)
            bold: True
            pos_hint: {'center_x': xTextInputMargin -0.1, 'center_y': (0.7- 3*textInputHeight - 3*yTextInputMargin) + textInputHeight/2}
        Spinner:
            id:spinner_id
            text: "Izberi regijo"
            
            values: ["Primorska", "Osrednjeslovenska", "Gorenjska", "Štajerska", "Dolenjska", "Koroška?", "Trst", "Posavska", "Hrvaška"]
            font_size: textInputFontSize
            size_hint: (textInputWidth, textInputHeight)
            pos_hint: {'x': xTextInputMargin, 'y': 0.7- 3*textInputHeight - 3*yTextInputMargin}
            on_text: root.spinner_clicked(spinner_id.text)
        
        Label:
            text: "Spol"
            bold: True
            font_size: 32
            color: (0,0,0,1)
            pos_hint: {'center_x': 0.75, 'center_y': 0.75}
        Label:
            text: "Moški"
            font_size: 20
            color: (0,0,0,1)
            pos_hint: {'center_x': 0.7, 'center_y': 0.7}
        CheckBox:
            group: "spol"
            value: root.male
            color:(0,0,0,1)
            size_hint:(0.03, 0.03)
            pos_hint: {'center_x': 0.7, 'center_y': 0.65}
            on_active: root.sex_clicked(self, self.active)
        Label:
            text: "Ženski"
            font_size: 20
            color: (0,0,0,1)
            pos_hint: {'center_x': 0.8, 'center_y': 0.7}
        CheckBox:
            group: "spol"
            value: root.female
            color:(0,0,0,1)
            size_hint:(0.03, 0.03)
            pos_hint: {'center_x': 0.8, 'center_y': 0.65}
            # on_active: root.sex_clicked(self, self.active)

        MyButton:   
            text: "Začni"

            pos_hint: {'x': 1 - 0.3 - xButtonMargin, 'y': yButtonMargin}
            size_hint: (0.3, buttonHeight) 
            on_press: 
                root.manager.transition.direction = 'left'
                root.manager.current = 'record_screen'
                root.save_user_data(name_input.text, surname_input.text, code_input.text, spinner_id.text)
        ReturnButton:
            pos_hint: {'x': 0.02, 'y': 1 - buttonHeight - yButtonMargin}
            on_press: 
                root.manager.transition.direction = 'right'
                root.manager.current = 'start_screen'
<RecordScreen>
    FloatLayout:
        next_rec: next_rec
        Label:
            id: screen_text
            text: root.text_to_read
            text_size: self.width, None
            # size_hint: 1, None
            font_size: 40
            height: self.texture_size[1]
            size_hint: (0.8, 0.5)
            pos_hint: {'center_x': 0.5, 'center_y': 0.65}
            halign: 'center'
            valign: 'middle'
            color: (0,0,0,1)
            # background_color: (0,0,0,1)
            # canvas.before:
            #     Color:
            #         rgba: self.background_color
            #     Rectangle:
            #         size: self.size
            #         pos: self.size
            
            
        MyButton:
            text: "Naslednji"
            id: next_rec
            font_size: 32
            bold: True
            pos_hint: {'center_x': 0.5, 'center_y': 0.15}
            size_hint: (0.3, buttonHeight*1.6) 
            on_press: 
                root.next_recording()
                # screen_text.text = root.text_to_read
            
        Image:
            id: rec_circle_img
            source: 'images/red-circle.png'
            size_hint: (0.0, 0.0)
            pos_hint: {'center_x': 0.5, 'center_y':0.26}
            keep_ratio: True
        MyButton:
            text: ""#"Ponovi"

            background_normal: 'images/redo_7.png'
            font_size: 32
            bold: True
            pos_hint: {'center_x': 0.25, 'center_y':  0.15 }
            size_hint: (buttonHeight2*root.height/root.width, buttonHeight2) 
            on_press: root.redo_rec()

        MyButton:
            text: "" #"Playback"

            background_normal: 'images/play_5.png'
            font_size: 28
            bold: True
            pos_hint: {'center_x': 0.75, 'center_y': 0.15}
            # size_hint: (0.1, buttonHeight) 
            size_hint: (buttonHeight2*root.height/root.width, buttonHeight2) 
            on_press: root.playback_rec()
        MyButton:
            text: "" #"1 nazaj"

            background_normal: 'images/left.png'
            font_size: 28
            bold: True
            pos_hint: {'center_x': 0.1, 'center_y': 0.15}
            size_hint: (buttonHeight3*root.height/root.width, buttonHeight3) 
            # size_hint: (0.1, buttonHeight) 
            on_press: root.one_text_back()
        MyButton:
            text: ""#"1 naprej"
            id: 1_foward

            background_normal: 'images/right.png'
            font_size: 28
            bold: True
            pos_hint: {'center_x': 0.9, 'center_y': 0.15}
            size_hint: (buttonHeight3*root.height/root.width, buttonHeight3) 
            # size_hint: (0.1, buttonHeight) 
            on_press: root.one_text_foward()

        ReturnButton:
            pos_hint: {'x': 0.02, 'y': 1 - buttonHeight - yButtonMargin}
            on_press: 
                root.manager.transition.direction = 'right'
                root.manager.current = 'start_screen'
                root.return_button_clicked()
        Label:
            id: progress_indicator
            text: root.prog_indic
            font_size: 28
            size_hint: (0.15, 1)
            pos_hint: {'center_x': 0.9, 'center_y': 0.85}
            color: (0,0,0,1)

<SettingScreen>
    FloatLayout:
        Label:
            text: "izhodna naprava"
            color: (0,0,0,1)
            pos_hint: {'center_x': 0.35, 'center_y': 0.8}
            font_size: labelFontSize
        Label:
            text: "vhodna naprava"
            color: (0,0,0,1)
            pos_hint: {'center_x': 0.35, 'center_y': 0.7}
            font_size: labelFontSize
        Label:
            text: "velikost teksta"
            color: (0,0,0,1)
            pos_hint: {'center_x': 0.35, 'center_y': 0.6}
            font_size: labelFontSize
        Label:
            text: "število kanalov"
            color: (0,0,0,1)
            pos_hint: {'center_x': 0.35, 'center_y': 0.4}
            font_size: labelFontSize*0.8
        Label:
            text: "rate"
            color: (0,0,0,1)
            pos_hint: {'center_x': 0.35, 'center_y': 0.3}
            font_size: labelFontSize*0.8
        ReturnButton:
            pos_hint: {'x': 0.02, 'y': 1 - buttonHeight - yButtonMargin}
            on_press: 
                root.manager.transition.direction = 'left'
                root.manager.current = 'start_screen'
                
<TestingScreen>
    FloatLayout:
        size: root.width, root.height

        Label:
            text: "TESTING BABY!"
        Image:
            id: rec_circle_img
            source: 'images/red-circle.png'
            size_hint: (0.0, 0.0)
            pos_hint: {'center_x': 0.5, 'center_y':0.5}
            keep_ratio: True
        MyButton:
            text: "Test"
            pos_hint: {'center_x': 0.5, 'center_y': 0.4 }
            on_press: root.test_audio()
        MyButton:
            text: "return"
            on_press: 
                root.manager.transition.direction = 'left'
                root.manager.current = 'start_screen'
                root.return_button_clicked()
<AboutScreen>
    GridLayout:
        cols: 1
        Label:
            text: "ABOUT THINGS BABY!"
        MyButton:
            text: "return"
            on_press: 
                root.manager.transition.direction = 'down'
                root.manager.current = 'start_screen'

